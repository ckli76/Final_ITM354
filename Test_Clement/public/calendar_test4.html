<!DOCTYPE html>
<html lang='en'>

<head>
    <!--Reference CSS-->
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.css' rel='stylesheet' />
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.css' rel='stylesheet' />
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/timegrid/main.css' rel='stylesheet' />
    <!--Reference JS files-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/interaction/main.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/timegrid/main.js'></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://momentjs.com/downloads/moment.js"></script>
        <meta charset='utf-8' />

    <!--Styling-->
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
            font-size: 14px;
        }

        #calendar {
            max-width: 900px;
            margin: 40px auto;
        }
    </style>

    <!--Script Begins-->
    <script>
        // --- Script to get the event inputs from server (Sending JSON)
        var CardData = [];
        $.CardDataJSON(CardData)

        $.get('/getAllCards', function (data) {
            //console.log(data)
            for (var i = 0; i < data.length; i++) {
                for (var j = 0; j < data[i].length; j++)
                    
                var dateTime = moment(`${data[i][j].date} ${data[i][j].time}`,'YYYY-MM-DD HH:mm:ss').format();
                
                console.log(dateTime)
                
                    test.push({
                        title: data[i][j].title,
                        start: data[i][j].date,
                    });
                }}); 

                //console.log(CardData)

                // --- Script for the calendar ---
                document.addEventListener('DOMContentLoaded', function () {
                    var calendarEl = document.getElementById('calendar');

                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        plugins: ['interaction', 'dayGrid', 'timeGrid'],
                        header: {
                            left: 'prev,next today',
                            center: 'title',
                            right: 'dayGridMonth,timeGridWeek,timeGridDay'
                        },
                        events: test
                    })

                    calendar.render();
                });

    </script>
</head>

<body>

    <div id='calendar'></div>

</body>

</html>